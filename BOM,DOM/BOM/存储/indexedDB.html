<!DOCTYPE html>
<html lang="en" manifest="./offline.appcache" type="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href="./test.css" rel="stylesheet" type="text/css"/>
</head>

<body>

    <script>
        let indexedDB = window.indexedDB;
        let request = indexedDB.open('test', 3);
        request.onsuccess = function (e) {
            let db = e.target.result;
            let objStore = db.transaction('keyname', 'readwrite').objectStore('keyname');
            objStore.openCursor(null, 'next').onsuccess = function (e) {
                let cursor = e.target.result;
                if (cursor) {
                    console.log(cursor);
                    cursor.continue();
                }
            };
        }

        request.onerror = function (e) {
            console.log(e, '发生了意外')
        }

        request.onupgradeneeded = function (e) {
            let database = e.target.result;
            //创建存储空间
            let objStore = database.createObjectStore('keyname', {
                keyPath: 'keynames'
            });

            // objStore.createIndex('name1', 'join', {unique: false});
            // objStore.createIndex('age2', '18', {unique: true});
        }
    </script>
</body>

</html>